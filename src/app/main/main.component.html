<div class="container">
  <!-- Filter Section -->
  <div class="filter-section">
    <h2 class="filter-heading">Filter by keywords</h2>
    <div class="search-container">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </svg>
      <input 
        type="text"
        [(ngModel)]="searchText" 
        (ngModelChange)="onSearchChange($event)"
        placeholder="Search for space news, missions, or agencies..."
        class="search-input"
        aria-label="Search articles"
      >
      <button *ngIf="searchText" class="clear-button" (click)="clearSearch()" aria-label="Clear search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="results-info">
      <div class="results-count" *ngIf="searchText">
        Found {{ filteredArticles.length }} result{{ filteredArticles.length !== 1 ? 's' : '' }} for "{{ searchText }}"
      </div>
      <div class="total-count" *ngIf="!searchText && !loading && !error">
        Showing {{ filteredArticles.length }} space article{{ filteredArticles.length !== 1 ? 's' : '' }}
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading space news...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state">
    <div class="error-icon">‚ö†Ô∏è</div>
    <p>{{ error }}</p>
    <button class="retry-button" (click)="retryLoad()">
      Try Again
    </button>
  </div>

  <!-- Empty Search State -->
  <div *ngIf="!loading && !error && filteredArticles.length === 0 && searchText" class="empty-state">
    <div class="empty-icon">üîç</div>
    <h3>No results found</h3>
    <p>No articles match "{{ searchText }}". Try different keywords.</p>
    <button class="clear-search" (click)="clearSearch()">
      Show All Articles
    </button>
  </div>

  <!-- No Articles State -->
  <div *ngIf="!loading && !error && articles.length === 0 && !searchText" class="no-articles">
    <div class="empty-icon">üì∞</div>
    <h3>No articles available</h3>
    <p>Check back later for the latest space news.</p>
  </div>

  <!-- Articles Grid -->
  <div *ngIf="!loading && !error && filteredArticles.length > 0" class="articles-grid">
    <article 
      class="article-card" 
      *ngFor="let article of filteredArticles" 
      (click)="navigateToArticle(article)"
      tabindex="0"
      (keydown.enter)="navigateToArticle(article)"
      (keydown.space)="navigateToArticle(article); $event.preventDefault()"
    >
      <div class="card-image">
        <img 
          [src]="article.imageUrl" 
          [alt]="article.title"
          loading="lazy"
          (error)="article.imageUrl = 'https://via.placeholder.com/400x200/1a237e/ffffff?text=Space+News'"
        >
        <div *ngIf="article.featured" class="featured-badge">Featured</div>
      </div>

      <div class="card-body">
        <div class="meta">
          <span class="date">{{ article.displayDate }}</span>
          <span class="news-site">{{ article.news_site }}</span>
        </div>

        <h2 class="title" [innerHTML]="highlightMatches(article.title)"></h2>

        <p class="excerpt" [innerHTML]="highlightMatches(article.summary)"></p>

        <div class="card-footer">
          <span class="read-more">Read full article ‚Üí</span>
        </div>
      </div>
    </article>
  </div>
</div>